DROP TABLE t_weather_forecast_samples;
DROP TABLE t_marshal_zone;
DROP TABLE t_session_data;
DROP TABLE t_car_motion_data_player;
DROP TABLE t_car_motion_data;
DROP TABLE t_car_telemetry_data;
DROP TABLE t_car_setup_data;
DROP TABLE t_car_status_data;
DROP TABLE t_participant_data;
DROP TABLE t_lap_data;
DROP TABLE t_packet_header;

CREATE TABLE t_packet_header (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_packet_format NUMBER,
  m_game_major_version NUMBER,
  m_game_minor_version NUMBER,
  m_packet_version NUMBER,
  m_packet_id NUMBER,
  m_session_UID NUMBER,
  m_session_time NUMBER,
  m_frame_identifier NUMBER,
  m_player_car_index NUMBER,
  m_secondary_player_car_index NUMBER,
  CONSTRAINT t_packet_header_pk PRIMARY KEY (id),
  CONSTRAINT unique_packet_header UNIQUE (m_session_UID, m_packet_id, m_frame_identifier)
);

CREATE TABLE t_car_telemetry_data (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_packet_id NUMBER,
  m_index NUMBER,
  m_speed NUMBER,
  m_throttle NUMBER,
  m_steer NUMBER,
  m_brake NUMBER,
  m_clutch NUMBER,
  m_gear NUMBER,
  m_engine_rpm NUMBER,
  m_drs NUMBER,
  m_rev_lights_percent NUMBER,
  m_brakes_temperature_RL NUMBER,
  m_brakes_temperature_RR NUMBER,
  m_brakes_temperature_FL NUMBER,
  m_brakes_temperature_FR NUMBER,
  m_tyres_surface_temperature_RL NUMBER,
  m_tyres_surface_temperature_RR NUMBER,
  m_tyres_surface_temperature_FL NUMBER,
  m_tyres_surface_temperature_FR NUMBER,
  m_tyres_inner_temperature_RL NUMBER,
  m_tyres_inner_temperature_RR NUMBER,
  m_tyres_inner_temperature_FL NUMBER,
  m_tyres_inner_temperature_FR NUMBER,
  m_engine_temperature NUMBER,
  m_tyres_pressure_RL NUMBER,
  m_tyres_pressure_RR NUMBER,
  m_tyres_pressure_FL NUMBER,
  m_tyres_pressure_FR NUMBER,
  m_surface_type_RL NUMBER,
  m_surface_type_RR NUMBER,
  m_surface_tyep_FL NUMBER,
  m_surface_type_FR NUMBER,
  CONSTRAINT t_car_telemetry_pk PRIMARY KEY (id),
  CONSTRAINT t_car_telemetry_packet_fk FOREIGN KEY (m_packet_id) REFERENCES t_packet_header (id)
);

CREATE TABLE t_car_status_data (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_packet_id NUMBER,
  m_index NUMBER,
  m_traction_control NUMBER,
  m_anti_lock_brakes NUMBER,
  m_fuel_mix VARCHAR2(100),
  m_front_brake_bias NUMBER,
  m_pit_limiter_status NUMBER,
  m_fuel_in_tank NUMBER,
  m_fuel_capacity NUMBER,
  m_fuel_remaining_laps NUMBER,
  m_max_rpm NUMBER,
  m_idel_rpm NUMBER,
  m_max_gears NUMBER,
  m_drs_allowed VARCHAR2(100),
  m_drs_activation_distance NUMBER,
  m_tyres_wear_RL NUMBER,
  m_tyres_wear_RR NUMBER,
  m_tyres_wear_FL NUMBER,
  m_tyres_wear_FR NUMBER,
  m_actual_tyre_compound VARCHAR2(100),
  m_visual_tyre_compound VARCHAR2(100),
  m_tyres_age_laps NUMBER,
  m_tyres_damage_RL NUMBER,
  m_tyres_damage_RR NUMBER,
  m_tyres_damage_FL NUMBER,
  m_tyres_damage_FR NUMBER,
  m_front_left_wing_damage NUMBER,
  m_front_right_wing_damage NUMBER,
  m_rear_wing_damage NUMBER,
  m_drs_fault VARCHAR2(100),
  m_engine_damage NUMBER,
  m_gear_box_damage NUMBER,
  m_vehicle_fia_flags VARCHAR2(100),
  m_ers_store_energy NUMBER,
  m_ers_deploy_mode NUMBER,
  m_ers_harvested_this_lap_MGUK NUMBER,
  m_ers_harvested_this_lap_MGUH NUMBER,
  m_ers_deployed_this_lap NUMBER,
  CONSTRAINT t_car_status_pk PRIMARY KEY (id),
  CONSTRAINT t_car_status_packet_fk FOREIGN KEY (m_packet_id) REFERENCES t_packet_header (id)
);

CREATE TABLE t_lap_data (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_packet_id NUMBER,
  m_last_lap_time NUMBER,
  m_current_lap_time NUMBER,
  m_sector_1_time_in_ms NUMBER,
  m_sector_2_time_in_ms NUMBER,
  m_best_lap_time NUMBER,
  m_best_lap_num NUMBER,
  m_best_lap_sector_1_time_in_ms NUMBER,
  m_best_lap_sector_2_time_in_ms NUMBER,
  m_best_lap_sector_3_time_in_ms NUMBER,
  m_best_overall_sector_1_time_in_ms NUMBER,
  m_best_overall_sector_1_lap_num NUMBER,
  m_best_overall_sector_2_time_in_ms NUMBER,
  m_best_overall_sector_2_lap_num NUMBER,
  m_best_overall_sector_3_time_in_ms NUMBER,
  m_best_overall_sector_3_lap_num NUMBER,
  m_lap_distance NUMBER,
  m_total_distance NUMBER,
  m_safety_car_delta NUMBER,
  m_car_position NUMBER,
  m_current_lap_num NUMBER,
  m_pit_status VARCHAR2(100),
  m_sector NUMBER,
  m_current_lap_invalid NUMBER,
  m_penalties NUMBER,
  m_grid_position NUMBER,
  m_driver_status VARCHAR2(100),
  m_result_status VARCHAR2(100),
  CONSTRAINT t_lap_data_pk PRIMARY KEY (id),
  CONSTRAINT t_lap_data_packet_fk FOREIGN KEY (m_packet_id) REFERENCES t_packet_header (id)
);

CREATE TABLE t_participant_data (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_index NUMBER,
  m_packet_id NUMBER,
  m_ai_controlled NUMBER,
  m_driver_id NUMBER,
  m_team_id VARCHAR2(100),
  m_race_number NUMBER,
  m_nationality VARCHAR(100),
  m_name VARCHAR2(100),
  CONSTRAINT t_participant_data_pk PRIMARY KEY (id),
  CONSTRAINT t_participant_packet_fk FOREIGN KEY (m_packet_id) REFERENCES t_packet_header (id)
);

CREATE TABLE t_car_setup_data (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_packet_id NUMBER,
  m_index NUMBER,
  m_front_wing NUMBER,
  m_rear_wing NUMBER,
  m_on_throttle NUMBER,
  m_off_throttle NUMBER,
  m_front_camber NUMBER,
  m_rear_camber NUMBER,
  m_front_toe NUMBER,
  m_rear_toe NUMBER,
  m_front_suspension NUMBER,
  m_rear_suspension NUMBER,
  m_front_anti_roll_bar NUMBER,
  m_rear_anti_roll_bar NUMBER,
  m_front_suspension_height NUMBER,
  m_rear_suspension_height NUMBER,
  m_brake_pressure NUMBER,
  m_brake_bias NUMBER,
  m_rear_left_tyre_pressure NUMBER,
  m_rear_right_tyre_pressure NUMBER,
  m_front_left_tyre_pressure NUMBER,
  m_front_right_tyre_pressure NUMBER,
  m_ballast NUMBER,
  m_fuel_load NUMBER,
  CONSTRAINT t_car_setup_data_pk PRIMARY KEY (id),
  CONSTRAINT t_car_setup_packet_fk FOREIGN KEY (m_packet_id) REFERENCES t_packet_header (id)
);

CREATE TABLE t_car_motion_data (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_packet_id NUMBER,
  m_index NUMBER,
  m_world_position_x NUMBER,
  m_world_position_y NUMBER,
  m_world_position_z NUMBER,
  m_world_velocity_x NUMBER,
  m_world_velocity_y NUMBER,
  m_world_velocity_z NUMBER,
  m_world_forward_dir_x NUMBER,
  m_world_forward_dir_y NUMBER,
  m_world_forward_dir_z NUMBER,
  m_world_right_dir_x NUMBER,
  m_world_right_dir_y NUMBER,
  m_world_right_dir_z NUMBER,
  m_g_force_lateral NUMBER,
  m_g_force_longitudinal NUMBER,
  m_yaw NUMBER,
  m_pitch NUMBER,
  m_roll NUMBER,
  CONSTRAINT t_car_motion_data_pk PRIMARY KEY (id),
  CONSTRAINT t_car_motion_packet_fk FOREIGN KEY (m_packet_id) REFERENCES t_packet_header (id)
);

CREATE TABLE t_car_motion_data_player (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_car_motion_data_id NUMBER,
  m_suspension_position_RL NUMBER,
  m_suspension_position_RR NUMBER,
  m_suspension_position_FL NUMBER,
  m_suspension_position_FR NUMBER,
  m_suspension_velocity_RL NUMBER,
  m_suspension_velocity_RR NUMBER,
  m_suspension_velocity_FL NUMBER,
  m_suspension_velocity_FR NUMBER,
  m_suspension_acceleration_RL NUMBER,
  m_suspension_acceleration_RR NUMBER,
  m_suspension_acceleration_FL NUMBER,
  m_suspension_acceleration_FR NUMBER,
  m_wheel_speed_RL NUMBER,
  m_wheel_speed_RR NUMBER,
  m_wheel_speed_FL NUMBER,
  m_wheel_speed_FR NUMBER,
  m_wheel_slip_RL NUMBER,
  m_wheel_slip_RR NUMBER,
  m_wheel_slip_FL NUMBER,
  m_wheel_slip_FR NUMBER,
  m_local_velocity_x NUMBER,
  m_local_velocity_Y NUMBER,
  m_local_velocity_z NUMBER,
  m_angular_velocity_X NUMBER,
  m_angular_velocity_y NUMBER,
  m_angular_velocity_z NUMBER,
  m_angular_acceleration_x NUMBER,
  m_angular_acceleration_y NUMBER,
  m_angular_acceleration_z NUMBER,
  m_front_wheels_angle NUMBER,
  CONSTRAINT t_car_motion_data_player_pk PRIMARY KEY (id),
  CONSTRAINT t_player_car_motion_data_fk FOREIGN KEY (m_car_motion_data_id) REFERENCES t_car_motion_data (id)
); 

CREATE TABLE t_session_data (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_packet_id NUMBER NOT NULL,
  m_weather VARCHAR2(100),
  m_track_temperature NUMBER,
  m_air_temperature NUMBER,
  m_total_laps NUMBER,
  m_track_length NUMBER,
  m_session_type VARCHAR2(100),
  m_track_id VARCHAR2(100),
  m_formula VARCHAR2(100),
  m_session_time_left NUMBER,
  m_session_duration NUMBER,
  m_pit_speed_limit NUMBER,
  m_game_paused NUMBER,
  m_is_spectating NUMBER,
  m_spectator_car_index NUMBER,
  m_sli_pro_native_support NUMBER,
  m_car_safety_status VARCHAR2(100),
  m_network_game VARCHAR2(100),
  CONSTRAINT t_session_data_pk PRIMARY KEY (id),
  CONSTRAINT t_session_packet_fk FOREIGN KEY (m_packet_id) REFERENCES t_packet_header (id)
);

CREATE TABLE t_marshal_zone (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_session_data_id NUMBER,
  m_zone_start NUMBER,
  m_zone_flag VARCHAR2(100),
  CONSTRAINT t_marshal_zone_pk PRIMARY KEY (id),
  CONSTRAINT t_session_data_marshal_fk FOREIGN KEY (m_session_data_id) REFERENCES t_session_data (id)
);


CREATE TABLE t_weather_forecast_samples (
  id NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
  m_session_data_id NUMBER,
  m_session_type VARCHAR2(100),
  m_time_offset NUMBER,
  m_weather VARCHAR2(100),
  m_track_temperature NUMBER,
  m_air_temperature NUMBER,
  CONSTRAINT t_weather_forecast_samples_pk PRIMARY KEY (id),
  CONSTRAINT t_session_data_weather_fk FOREIGN KEY (m_session_data_id) REFERENCES t_session_data (id)
);